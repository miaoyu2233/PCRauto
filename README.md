<p align="center">
  <img alt="LOGO" src="https://s2.loli.net/2024/10/06/XSPUyb2VKuA9DQT.png" width="255" height="255" />
</p>

<div align="center">

# PCRauto公主连结小助手
</div>

PCR 公主连结（PrincessConnect）**图像识别自动化小助手**  ***PCRauto*** <kbd>璃乃版</kbd>  
**禁止将PCRauto用于任何性质盈利行为**  
**带GUI界面,缡乃都会操作**  
目前PCRauto  
**仅支持** **中国台湾繁体字服**及**中国大陆简体字服(部分)**和**日服(部分)**   
PCRauto支持大部分模拟器及DMM端,但推荐大家用比较主流的那些  
遇到问题请仔细看介绍及教程（防呆不防傻,你连看都不看就跑群里说有问题,我实在不知道该怎么回答你的问题）  
本项目由[MaaFramework](https://github.com/MaaXYZ/MaaFramework)及[WFAWPF](https://github.com/SweetSmellFox/MFAWPF)强力驱动！  
>虽说公主连结不怎么肝,但是这个工具主要是为了方便玩公主连结的时候能节约时间去干其他事情而制作的。因为本人是咸鱼玩家，这个小助手主要是自己用的，所以本助手很多地方尽量在实现收益最大化,没法满足所有玩家需求，可以自己看着先试试再说,其他服务器只会做部分功能适配,以后会慢慢添加。  

## 目前主要功能 <img alt="LOGO" src="https://s2.loli.net/2024/09/30/Xzy6tETFQWI2rAD.png" width="97.8" height="138" />
**默认所有任务均适配 繁体字服**  
**额外支持的服务器将用简写字母代替**  
J-简体字服 R-日服  
|     |   |   |
|  ----  | ----  | ----  |
| 启动游戏(J)  | 行程表(J) | 商店买药(J) | 
| 竞技场(J)  | 探险领取 | 探险事件 | 
| 领取日常奖励(J)  | 宝石买体力(J) | 主线扫荡预设(J) | 
| 公主骑士属性等级 | 领取礼物邮件(J) | 遗迹/圣迹(J) | 
| 神殿(J)  | 挂机或关闭游戏(J) | 巡游 | 
| 每日免费扭蛋 | 公会小屋奖励 | 小屋Like | 
| 刷当期活动  | 刷支线活动 | 商店买角色碎片(J) | 
| 喂蛋糕好感(J)  | 角色剧情(J,R) | 活动剧情(J) | 
| 露娜塔剧情(J)  | 公会乞讨装备|  | 小工具-角色倒下暂停(J) |
|  当期活动日常 |   | 露娜塔每日扫荡  |  |  |
- >其他功能待添加中

## 关于下载  <img alt="LOGO" src="https://s2.loli.net/2024/09/30/rYWS1x7HOKLiACj.png" width="128" height="83.5" />
右方**Releases页面**找到最新的发行版下载即可  
如果**下载慢**也可以加入企鹅群下载交流
    
    979858935  密码:りのPCRauto
## 注意事项 <img alt="LOGO" src="https://s2.loli.net/2024/09/30/PqVIaeT9itMj8yn.png" width="128" height="83.5" />
- 模拟器分辨率必须为 **1280x720(DPI 240)**,否则部分任务会执行错误  
- 推荐游戏设置为60帧及以上,30帧也能用，但是不太推荐  
- 理论上**任何安卓模拟器都能用**，如果用不了可以**查看最下方的Q&A常见问题**,但是还是建议大家用比较主流的那几个,PCRauto对mumu12模拟器以及雷电模拟器有截图加强效果，可以提高截图速度。不推荐使用蓝叠模拟器（蓝叠和市面上大部分模拟器不一样，可能会无法识别）  
- 所有功能最初起点和终点都是**游戏主页**，如果要单独执行某个功能或某几个，请保证游戏**在游戏主页**再**启动 PCRauto助手的任务**  
- 请尽量**保持模拟器截图用时在200ms及以下**，适当提高模拟器分配的性能大小来降低截图耗时。如果实在太高,可以多试几个截图捕获方式，找到比较合适的  
- 如果是**第一次**在模拟器上运行游戏,请将某些**第一次会出现的窗口(可可萝跑出来说一堆东西那种)**手动点了,并且选择好**今后不再提示此讯息**再启动PCRauto的任务,并且小助手默认是**动画之类的选择跳过**,请自行在设置内调整好  
- **设计之初已经考虑到了游戏网络延迟问题**，只要不是过高的延迟就不会产生任何影响。但是不提供掉线重连功能，当在执行某项任务掉线后，此项任务需要重新执行或不可再次执行。   
- 启动PCRauto小助手后请不要随意点击游戏内内容以免发生错误，把**模拟器缩放至后台**，就可以去干其他的事情了  
- **模拟内不可开启**后台挂机保活，动态调整帧率功能  
- PCRauto小助手的新版本文件**不可直接覆盖**至老版本文件,请将两个版本文件分开,或删除老版本文件后再解压  

## 功能详情介绍<img alt="LOGO" src="https://s2.loli.net/2024/09/30/Xzy6tETFQWI2rAD.png" width="97.8" height="138" />
- **自动启动游戏**  
>自动寻找游戏启动，并自动下载游戏内更新资源，自动取消公告弹窗等。但大版本更新等需要跳转到游戏外商店更新的情况下无法自动更新。同时有时候会弹出一些特殊窗口,本人回坑没多久有些没遇到，所以可能会无法执行（如果发现小助手一直在点某个位置，而弹窗还在的话，可以手动关闭此弹窗，无需重启任务，弹窗消失后会继续执行后续任务)  
- **行程表**  
>行程表提高了兼容性，现在允许每个玩家的不同设置均可正常执行，但是为了兼容性，牺牲了执行速度  
- **自动看剧情**
>自动寻找new的角色剧情并观看，请注意，下载剧情时长不能超过3分钟。因其特殊性，仅自动看活动剧情以及看露娜塔剧情完成后不会自动返回至主页。如果在看动画时点了暂停属于正常现象，它会点一下暂停看一段时间再点一下暂停，慢慢挂是能看完的（懒得改了,所以目前就这样）  
- **买角色碎片**
>选择自己要买的角色碎片即可。刷新次数指的是刷新到刷新所需的费用后停止购买。注意:简中玩家看见有不属于自己版本的角色,别选就行了。繁中角色名称部分与简中不同(PCRauto以繁中为准)，自己实在不认识百度就行（不过一般角色是按游戏内商店的顺序排列，很好辨别）  
- **巡游**  
>巡游由于事件多，所以执行有点慢这是正常现象，请耐心等待。吃食物功能是每次在投骰子之前都会吃一份食物,但只会吃部分食物，有些食物是不会去吃的,开启吃食物功能后整体耗时会大幅度提升，请谨慎考虑是否开启  
- **主线扫荡预设**
>选择预设选项的内容进行扫荡  
- **探险事件**
>将探险内的各种事件点击完  
- **刷支线活动**
>小助手会自动寻找处于"new"状态下的支线活动（也可手动进入要刷的活动页面内再执行任务）  
>当前任务会执行完除了HARD—BOSS以及VERY HARD-BOSS以外的所有关卡，执行完后会自动返回到主页面  
>请注意：如果在执行完所有任务之前中断了执行返回了页面，需要手动进入当前活动内，再执行此项任务计划  
- **刷当期活动**
>与刷支线活动介绍同理  
- **当期活动日常**
> 做当期活动的日常任务，包含进入活动-完成活动扫荡-刷每日一次的VERYHARD BOSS-领取活动的每日奖励。
此任务在你完成活动的当天不可开启，因为会识别每天进入送的3张券，只可在第2天及以后开启。活动扫荡需要在第一天就勾选好需要扫荡的关卡，推荐最低选2个(不然刷BOSS都没券)。  
- **露娜塔每日扫荡**
> 刷露娜塔登顶后的5次扫荡,需要登顶后才可开启此功能
- **小工具-角色倒下暂停**
>开启后进入战斗时，当任意一名角色倒下，则会暂停游戏(请注意:因为是通过BGR转GRAY识别的,此功能可能会因为一些皮肤比较黑的角色造成误判)。不支持手操时使用（不过都手操了，都不需要找个了吧）  
- **其他功能介绍**  
>待编写  

## 璃乃都能学会的使用教程!  <img alt="LOGO" src="https://s2.loli.net/2024/09/30/PqVIaeT9itMj8yn.png" width="128" height="83.5" />
**点击Releases下载最新版程序(建议Windows系统用户直接下PCRauto-GUI,有GUI界面)**  

**Windows系统用户**  
- 如果是PCRauto-GUI用户,下载好解压，打开PCRauto.exe即可
- 启动好模拟器后，打开PCRauto，第一次使用需要点时间自动检测模拟器adb，请耐心等待或多点几次,如未检测到，请手动选择    
- PCRauto小助手GUI版每次更新需要自己手动重新下载  
- 完成后，选择任务，开始任务就可以了（强烈建议按PCRauto内默认的顺序添加，效果更佳）  
- 启动任务后，请不要随意乱点击游戏内内容，推荐将模拟器缩放至后台就可以去干其他事情了  

**其他系统用户**  
- 解压文件
- 执行PCRauto.exe，输入数字即可执行对应指令
- 选择Auto detect （自动寻找模拟器adb），选择自己的模拟器
- 选择Add task(加添任务) 同理Delete task为删除任务
- 添加好自己想要的任务后，选择Runtasks(开始启动任务)（强烈建议按PCRauto内默认的顺序添加，效果更佳）  
- 启动任务后，请不要随意乱点击游戏内内容，推荐将模拟器缩放至后台就可以去干其他事情了  

## Q&A常见问题 <img alt="LOGO" src="https://s2.loli.net/2024/09/30/rYWS1x7HOKLiACj.png" width="128" height="83.5" />
出现问题时可参考此逐一排查  
- PCRauto执行部分任务较慢  
>公主连结在部分页面切换或执行时需请求网络连接，由于大部分人都是使用加速器等连接游戏的，网络有时会有波动，未了保证大部分人的网络环境及大部分网络情况都能稳定准确运行，所以有些地方小助手在执行时会有点慢，请见谅.简体字版和日版部分也慢是因为用的是同一逻辑，主要是便于维护（其实是我懒）
- PCRauto无法启动,闪退,报错
>PCRauto-GUI版仅支持64位操作系统  
>请确保含有[.NET 8](https://dotnet.microsoft.com/zh-cn/download/dotnet/8.0#:~:text=%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-,Windows,-Arm64)以及
[Microsoft Visual C++可再发行程序包](https://learn.microsoft.com/zh-cn/cpp/windows/latest-supported-vc-redist?view=msvc-170#visual-studio-2015-2017-2019-and-2022)
>请确保选择的是你当前的模拟器，点击加载的圆圈按钮可自动查找当前模拟器位置并填入,如果无法自动找到也可以自己手动填写  
>确保文件打开时没被杀毒软件删除了一部分文件(一般是不会的)  
- 对类型“MFAWPF.Views.MainWindow”的构造函数执行符合指定的绑定约束的调用时引发了异常 
> 老是有人问这个问题,麻烦仔细看下上面的（PCRauto无法启动,闪退,报错）问题,需要安装
[Microsoft Visual C++可再发行程序包](https://learn.microsoft.com/zh-cn/cpp/windows/latest-supported-vc-redist?view=msvc-170#visual-studio-2015-2017-2019-and-2022)  
- PCRauto启动后并没有报错，但是没有在执行操作动作  
> 请不要开启模拟器的动态调整帧率功能以及后台挂机保活功能  
关闭小助手后请查看adb进程是否还在，请手动结束adb进程再启动PCRauto小助手(win系统电脑可打开任务管理器找到adb.exe进程进行关闭即可)    
- PCRauto无法找到adb,手动填入adb地址也无效,或填入了正确adb,但还是无法启动    
> 请确保后台没有adb进程后再启动检查一下  
> 请查看自己模拟器的安卓版本，如果过低可能自带的abd版本过旧无法使用，可尝试升级或换其他模拟器  
> 如果实在想用自己版本的模拟器，可使用非模拟器自带的adb[SDK Platform-Tools](https://developer.android.google.cn/tools/releases/platform-tools?hl=zh-cn)下载好解压后请按下方操作进行,也可自行百度  
> 将存放的路径添加到环境变量（系统变量Path）
> 例如:D:\Tool\ADBTOOL\platform-tools_r33.0.3-windows\platform-tools
> 添加好后建议重启下设备
> 打开cmd,输入命令adb，如果显示了版本号以及路径则说明安装成功  
> 再次打开小助手后自动搜索应该会显示自己路径加模拟器IP端口的连接
> 如果没有可以手动用adb连接一下自己的模拟器 
> 打开模拟器的开发者模式(不会请自行百度)  
> 在开发者模式中启动usb调试(拟器内没有的话可能是默认是开启的)  
> 打开cmd 
> 先输入 adb kill-server （结束进程）(请注意,模拟器自带的adb进程需要自己去结束进程，输入这个可能不会生效)  
> 然后输入 adb connect ip端口号(例如:adb connect 127.0.0.1:2233)
> 输入 adb devices 可查看adb已经连结了的设备  
- 多个模拟器启动后PCRauto选择的并不是自己想要的模拟器  
>多开模拟器时模拟器会被分配至其他ADB端口，只需要自动搜索模拟器后选择和自己需要使用的端口一致的模拟器即可。  
>如果无法自动找到端口可以自己手动填写  
>不懂模拟器端口是什么的，请自行网络上搜索自己模拟器的端口如何查看  
- 关闭PCRauto后无法再次启动  
>请关闭模拟器的adb进程后再重新启动小助手，win系统电脑可打开任务管理器找到adb.exe进程进行关闭即可 

## 关于日服 <img alt="LOGO" src="https://s2.loli.net/2024/09/30/Xzy6tETFQWI2rAD.png" width="97.8" height="138" />  
日服模拟器版和其他服一致，无需额外配置  
DMM版本由于其特殊性，所以需要额外进行配置，请按下方顺序进行配置  
**DMM版PC服教程**  
- DMM版公主连结也必须以720P分辨率运行（将鼠标移至窗口角落将窗口拉大,如果拉不动了则表示为720P分辨率）  
- PCRauto小助手需以管理员身份运行  
- 启动好PCRauto小助手后,请选择PCWin32模式，再在右侧选择好公主连结的程序窗口(PrincessConnectReDive)  
- 由于DMM端特殊性，启动任务后，不可将公主连结缩放至后台，并且不可使用鼠标键盘等进行输入操作（就是电脑不能碰了）  
